<html>
  <head>
    <title>Reward</title>
  </head>
  <body>
    <input type="number" id="qtd" value="1">
    <button id="button">click</button>
    <div id="counter">0</div>
  </body>
  <script>
  // template: https://www.bing.com/spotlight?spotlightId=BiarritzFrance&q=0&carindexpill=0&carindeximg=0
  
  // Contador de aberturas deve permitir popups
  var counter = document.getElementById("counter")
  var T = 0;
  
  // Delay para fechar aba
  var delay = 7000;
  
  // Variacoes do spotlight id
  locations = ["ZabriskiePointDeathValley", "WardOvensNevada", "SvortuloftLightIceland", "AdDeirPetraJordan", "BiarritzFrance", "BaffinIslandCanada", "ChristliegerGermany", "KhaoSamRoiYotThailand", "CoyoteButtesSouthArizona", "ForthBridgeScotland", "LakeAlbertUganda", "LingmoorFellEngland", "NdzwaniComoros"]
  
  function abreAbas(N) {
      let L = parseInt((Math.random() * locations.length));
      let pill = parseInt(Math.random() * 15);
      let index = parseInt(Math.random() * 10);
      let template = `https://www.bing.com/spotlight?spotlightId=${locations[L]}&q=${locations[L]}${pill}${index}&carindexpill=${pill}&carindeximg=${index}&form=SLVOPI`
       //`https://www.bing.com/search?pglt=43&PC=U523&q=${locations[L]}${N}${pill}${index}&FORM=ANNTA1`;
       if (N > 0) {
         console.log("abrindo aba", T, " ", template);
         let wind = window.open(template, "_blank");
         N--;
          // Update counter
          T++;
          counter.textContent = T;
            // auto close
            setTimeout(() => {
              wind.close();
              console.log("fechando aba", T);
              // Try open new tab with 1 sec delay
              setTimeout(() => abreAbas(N), 1000);
            }, delay)
        }
  }
    
  // Add event listenner to button
  var botao = document.getElementById("button")
  qtd = document.getElementById("qtd")
  botao.addEventListener("click", () => abreAbas(qtd.value))
  </script>
</html>
