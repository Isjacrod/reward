<html>
  <head>
    <title>Reward</title>
  </head>
  <body>
    <button id="button">click</button>
    <div id="counter">0</div>
  </body>
  <script>
  // template: https://www.bing.com/spotlight?spotlightId=BiarritzFrance&q=0&carindexpill=0&carindeximg=0
  
  // Contador de aberturas deve permitir popups
  var counter = document.getElementById("counter")
  var N = 0;
  
  // Delay para fechar aba
  var delay = 1000;
  
  // Variacoes do spotlight id
  locations = ["BiarritzFrance", "BaffinIslandCanada", "ChristliegerGermany", "KhaoSamRoiYotThailand", "CoyoteButtesSouthArizona", "ForthBridgeScotland", "LakeAlbertUganda", "LingmoorFellEngland", "NdzwaniComoros"]
  
  function abre1Aba() {
      let L = parseInt((Math.random() * locations.length));
      let pill = parseInt(Math.random() * 15);
      let index = parseInt(Math.random() * 10);
      let template = `https://www.bing.com/spotlight?spotlightId=${locations[L]}&q=${locations[L]}${pill}${index}&carindexpill=${pill}&carindeximg=${index}&form=SLVCAR`
       //`https://www.bing.com/search?pglt=43&PC=U523&q=${locations[L]}${N}${pill}${index}&FORM=ANNTA1`;
      console.log("abrindo aba", N, " ", template);
      let wind = window.open(template, "_blank");
          // auto close
          window.setTimeout(() => {
            wind.close();
            console.log("fechando aba", N);
          }, delay)
      N++;
    // Update counter
    counter.textContent = N
  }

  // Add event listenner to button
  var botao = document.getElementById("button")
    botao.addEventListener("click", abre1Aba)
  </script>
</html>
